# Bankroll Telegram Bot

**Stack:** Python 3.11+, aiogram 3.x, SQLAlchemy 2.x, PostgreSQL (prod) / SQLite (local)

–ë–æ—Ç –≤–µ–¥—ë—Ç –±–∞–Ω–∫—Ä–æ–ª–ª –ø–æ–∫–µ—Ä–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞: –∫—ç—à –∏ MTT (–≤–∫–ª—é—á–∞—è PKO), –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π,
—Ä–µ–±–∞–∏/–∞–¥–¥–æ–Ω—ã (—Ç–æ–ª—å–∫–æ ¬´+¬ª), –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é –∫–Ω–æ–ø–∫—É **üèÅ Cashout / Finish**, –æ—Ç—á—ë—Ç—ã –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
(–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü/–≥–æ–¥/–∫–∞—Å—Ç–æ–º), –∏—Å—Ç–æ—Ä–∏—é –∏ –±–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∫–∏. –ö–Ω–æ–ø–∫–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —Å —ç–º–æ–¥–∑–∏, —Ç–µ–∫—Å—Ç—ã ‚Äî –Ω–∞ —Ä—É—Å—Å–∫–æ–º.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.11+.
2. –°–∫–∞—á–∞–π—Ç–µ –∞—Ä—Ö–∏–≤ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ –µ–≥–æ.
3. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
python -m venv .venv
# Windows:
.venv\Scripts\activate
# macOS/Linux:
source .venv/bin/activate
```

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

5. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:

```
TELEGRAM_BOT_TOKEN=123456:ABC...
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º SQLite-—Ñ–∞–π–ª
DATABASE_URL=sqlite+aiosqlite:///./bankroll.db
# –î–ª—è PostgreSQL (Railway/Cloud) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
# DATABASE_URL=postgresql+asyncpg://USER:PASSWORD@HOST:PORT/DBNAME
TZ=Europe/Moscow
LOG_LEVEL=INFO
```

6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
python -m app.main
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –í Telegram –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É `/start`.

---

## ‚òÅÔ∏è –î–µ–ø–ª–æ–π –Ω–∞ Railway

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
2. –í Railway –¥–æ–±–∞–≤—å—Ç–µ –ø–ª–∞–≥–∏–Ω **PostgreSQL** (Add Plugin ‚Üí PostgreSQL). –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `DATABASE_URL`.
3. –í –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Railway –¥–æ–±–∞–≤—å—Ç–µ:
   - `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
   - `DATABASE_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Railway Postgres (—Ñ–æ—Ä–º–∞—Ç: `postgresql+asyncpg://...`)
   - `TZ`, `LOG_LEVEL` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. Railway —Å–∞–º –∑–∞–ø—É—Å—Ç–∏—Ç —Å–±–æ—Ä–∫—É.

### Procfile
```
web: python -m app.main
```

> –ï—Å–ª–∏ Railway –ø—Ä–æ—Å–∏—Ç –ø–æ—Ä—Ç, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è ‚Äî —ç—Ç–æ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç, –æ–Ω —Å–∞–º –¥–µ–ª–∞–µ—Ç –∏—Å—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
  __init__.py
  main.py
  config.py
  db.py
  models.py
  enums.py
  keyboards.py
  states.py
  services.py
  utils.py
  handlers/
    __init__.py
    start.py
    menu.py
    sessions.py
    tournaments.py
    cash.py
    payouts.py
    history.py
    report.py
    settings.py
requirements.txt
Procfile
.env.example
README.md
```

---

## üß≠ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `New Session` ‚Äî –º–∞—Å—Ç–µ—Ä –∑–∞–ø—É—Å–∫–∞ —Å–µ—Å—Å–∏–∏ (Online/Offline ‚Üí Cash/MTT ‚Üí Game ‚Üí Room/Place ‚Üí –í–∞–ª—é—Ç–∞ ‚Üí ‚Ä¶)
- `+ Rebuy` / `+ Addon` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ ¬´+¬ª (–µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –±–æ—Ç —É—Ç–æ—á–Ω–∏—Ç –∫–∞–∫–æ–π)
- `Cashout / Finish` ‚Äî –∑–∞–∫—Ä—ã—Ç–∏–µ –ª—é–±–æ–π –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏ (–∫—ç—à/—Ç—É—Ä–Ω–∏—Ä, PKO —Å–æ —Å–ø–ª–∏—Ç–æ–º –±–∞—É–Ω—Ç–∏ –ø–æ –∂–µ–ª–∞–Ω–∏—é)
- `History` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏, –±–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∫–∏
- `Report` ‚Äî –æ—Ç—á—ë—Ç –∑–∞ Week/Month/Year/Custom –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–ª—é—Ç–µ
- `Settings` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –≤–∞–ª—é—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä—É–º–æ–≤/–º–µ—Å—Ç, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∫—Ä–æ–ª–ª–∞–º–∏
